<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util.xsd">

    <bean id="simpleIdGenerator" name="idGenerator" class="ua.epam.spring.hometask.dao.SimpleIdGenerator" 
        scope="prototype">
    </bean>
    
    <!-- abstract bean to inject the same field idGenerator -->
    <bean id="abstractInMemoryDao" abstract="true">
        <property name="idGenerator" ref="idGenerator" />
    </bean>

    <bean id="inMemoryEventDao" name="eventDao" class="ua.epam.spring.hometask.dao.impl.InMemoryEventDao"
            parent="abstractInMemoryDao" >
        <property name="auditoriumDao" ref="auditoriumDao" />
        <property name="ticketDao" ref="ticketDao" />
    </bean>
    
    <bean id="inMemoryOrderDao" name="orderDao" class="ua.epam.spring.hometask.dao.impl.InMemoryOrderDao">
        <property name="idGenerator" ref="idGenerator" />
        <property name="orderEntryDao" ref="orderEntryDao" />
    </bean>
    
    <bean id="inMemoryOrderEntryDao" name="orderEntryDao" class="ua.epam.spring.hometask.dao.impl.InMemoryOrderEntryDao">
        <property name="idGenerator" ref="idGenerator" />
        <property name="ticketDao" ref="ticketDao" />
    </bean>
    
    <alias name="inMemoryTicketDao" alias="ticketDao" />
    <bean id="inMemoryTicketDao" class="ua.epam.spring.hometask.dao.impl.InMemoryTicketDao">
        <property name="idGenerator" ref="idGenerator" />
        <property name="orderEntryDao" ref="orderEntryDao" />
        <property name="orderDao" ref="orderDao" />
    </bean>
    
    <bean id="inMemoryUserDao" name="userDao" class="ua.epam.spring.hometask.dao.impl.InMemoryUserDao">
        <property name="idGenerator" ref="idGenerator" />
    </bean>
        
</beans>