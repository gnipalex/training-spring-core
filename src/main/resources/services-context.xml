<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:c="http://www.springframework.org/schema/c"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd">

    <alias name="defaultBookingService" alias="bookingService" />
    <bean id="defaultBookingService" class="ua.epam.spring.hometask.service.impl.DefaultBookingService">
        <property name="ticketDao" ref="ticketDao" />
        <property name="orderEntryDao" ref="orderEntryDao" />
        <property name="eventDao" ref="eventDao" />
        <property name="discountService" ref="discountService" />
        <property name="orderService" ref="orderService" />
        <property name="additionalPriceStrategy">
            <bean class="ua.epam.spring.hometask.service.strategy.impl.SummingAdditionalEventPriceStrategy">
                <property name="strategies">
                    <list>
                        <bean id="vipSeatsEventPriceStrategy" class="ua.epam.spring.hometask.service.strategy.impl.VipSeatsEventPriceStrategy">
                            <constructor-arg value="2D" />
                        </bean>
                        <bean id="highRatingEventPriceStrategy" class="ua.epam.spring.hometask.service.strategy.impl.HighRatingEventPriceStrategy">
                            <property name="highRatingMultiplier" >
                                <value>1.2D</value>
                            </property>
                        </bean>
                    </list>
                </property>
            </bean>
        </property>
    </bean>

    <alias name="defaultEventService" alias="eventService" />
    <bean id="defaultEventService" class="ua.epam.spring.hometask.service.impl.DefaultEventService" >
        <property name="eventDao" value="#{@eventDao}" />
    </bean>
    
    <alias name="defaultOrderService" alias="orderService" />
    <bean id="defaultOrderService" class="ua.epam.spring.hometask.service.impl.DefaultOrderService">
        <property name="orderDao" ref="orderDao" />
        <property name="orderEntryDao" ref="orderEntryDao" />
    </bean>
    
    <alias name="defaultUserService" alias="userService" />
    <bean id="defaultUserService" class="ua.epam.spring.hometask.service.impl.DefaultUserService">
        <property name="userDao" ref="userDao" />
    </bean>

</beans>